<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Whack-a-Mole - Munetios Games Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://api.munetios.com/beautiful-css/beautiful.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
    />
    <style>
      body {
        font-family: "Google Sans Flex", system-ui, sans-serif;
        background: linear-gradient(135deg, #8ec5fc 0%, #e0c3fc 100%);
        min-height: 100vh;
      }
      .game-grid {
        display: grid;
        grid-template-columns: repeat(3, 120px);
        grid-template-rows: repeat(3, 120px);
        gap: 15px;
        margin: 2rem auto;
      }
      .hole {
        width: 120px;
        height: 120px;
        background: radial-gradient(circle, #654321 0%, #3e2723 100%);
        border-radius: 50%;
        position: relative;
        cursor: pointer;
        box-shadow: inset 0 8px 16px rgba(0, 0, 0, 0.5);
      }
      .mole {
        width: 80px;
        height: 80px;
        background: #8b4513;
        border-radius: 50%;
        position: absolute;
        bottom: -80px;
        left: 20px;
        transition: bottom 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
      }
      .mole.up {
        bottom: 10px;
      }
      .mole.hit {
        background: #666;
      }
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 12px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
      }
      @keyframes slideIn {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      .toast.hiding {
        animation: slideOut 0.3s ease-in forwards;
      }
      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(400px);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body class="flex items-center justify-center p-4">
    <div class="liquid-glass p-8 max-w-2xl">
      <h1 class="text-4xl font-bold text-white mb-4 text-center">
        üî® Whack-a-Mole
      </h1>
      <div class="flex justify-around text-white text-lg mb-4">
        <span>Score: <span id="score" class="font-bold">0</span></span>
        <span>Time: <span id="time" class="font-bold">30</span>s</span>
        <span>High: <span id="highScore" class="font-bold">0</span></span>
      </div>
      <div class="game-grid" id="gameGrid"></div>
      <div class="text-center">
        <button
          id="startBtn"
          class="bg-white/20 hover:bg-white/30 text-white font-bold py-3 px-8 rounded-lg transition"
        >
          <span class="material-symbols-outlined align-middle">play_arrow</span>
          Start Game
        </button>
      </div>
      <div class="mt-4 text-center">
        <a href="index.html" class="text-white/80 hover:text-white underline"
          >‚Üê Back to Hub</a
        >
      </div>
    </div>

    <script>
      let score = 0;
      let timeLeft = 30;
      let gameActive = false;
      let highScore = localStorage.getItem("whackHighScore") || 0;
      let moleTimeout;
      let timerInterval;

      document.getElementById("highScore").textContent = highScore;

      function showToast(message, duration = 3000) {
        const toast = document.createElement("div");
        toast.className = "toast";
        toast.textContent = message;
        document.body.appendChild(toast);

        setTimeout(() => {
          toast.classList.add("hiding");
          setTimeout(() => toast.remove(), 300);
        }, duration);
      }

      function createGrid() {
        const grid = document.getElementById("gameGrid");
        for (let i = 0; i < 9; i++) {
          const hole = document.createElement("div");
          hole.className = "hole";
          const mole = document.createElement("div");
          mole.className = "mole";
          mole.textContent = "üêπ";
          mole.addEventListener("click", () => whackMole(mole));
          hole.appendChild(mole);
          grid.appendChild(hole);
        }
      }

      function randomMole() {
        if (!gameActive) return;

        const moles = document.querySelectorAll(".mole");
        const upMoles = document.querySelectorAll(".mole.up:not(.hit)");
        upMoles.forEach((m) => {
          m.classList.remove("up");
        });

        const randomIndex = Math.floor(Math.random() * moles.length);
        const mole = moles[randomIndex];
        mole.classList.remove("hit");
        mole.classList.add("up");

        const time = Math.max(400, 1000 - score * 10);
        moleTimeout = setTimeout(randomMole, time);
      }

      function whackMole(mole) {
        if (!gameActive || mole.classList.contains("hit")) return;
        if (!mole.classList.contains("up")) return;

        score++;
        document.getElementById("score").textContent = score;
        mole.classList.add("hit");
        mole.classList.remove("up");

        setTimeout(() => {
          mole.classList.remove("hit");
        }, 300);
      }

      function startGame() {
        gameActive = true;
        score = 0;
        timeLeft = 30;
        document.getElementById("score").textContent = score;
        document.getElementById("time").textContent = timeLeft;

        showToast("üî® Start Whacking!", 2000);
        randomMole();

        timerInterval = setInterval(() => {
          timeLeft--;
          document.getElementById("time").textContent = timeLeft;

          if (timeLeft <= 0) {
            endGame();
          }
        }, 1000);
      }

      function endGame() {
        gameActive = false;
        clearTimeout(moleTimeout);
        clearInterval(timerInterval);

        document
          .querySelectorAll(".mole.up")
          .forEach((m) => m.classList.remove("up"));

        if (score > highScore) {
          highScore = score;
          localStorage.setItem("whackHighScore", highScore);
          document.getElementById("highScore").textContent = highScore;
          showToast(`üèÜ New High Score: ${score}!`, 4000);
        } else {
          showToast(`üéÆ Game Over! Score: ${score}`, 4000);
        }
      }

      document.getElementById("startBtn").addEventListener("click", startGame);
      createGrid();
    </script>
  </body>
</html>
